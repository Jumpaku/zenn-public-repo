---
title: "あとがき"
---

# あとがき
ここまで読んでいただき大変ありがとうございました。最後にあとがきを書いてみましたのでよければ読んでいってください。

## 本を作ってみた感想
Zenn で本を作るのは初めてなので色々な反省点があります。

「理解度 60 ~ 70% 程度で先に書き始めてしまう」というのが自分のスタイルなのですが、これによって学習や理解が飛躍的に進むというのが大きなメリットである一方で、勘違いや間違いなどが後から見つかるケースが非常に多く、頻繁に内容を修正する羽目になります(理解度が 60 ~ 70% だと思っていたのが実際には 30% ぐらいだったみたいなことがあります😅)。

この本についても、最初から完全な理解に基づいた上でしっかり構成を考えて作ったわけではなく、以前に書いた「学習ロードマップ」の記事から逆算して重要度や誤解を起こしやすいポイントからなんとなくのストーリーラインを作ってライブ感で作成したというのが実情です(この本を書くこと自体が学習プロセスに組み込まれているので、そういうやり方をしたという理由もあります)。

なので正直に言えば、作成プロセスの時点から「本」というよりは「**記事の集合**」あるいは「**かなり長い記事をチャプターに断片化したもの**」として捉えてしまった方が良いです。非連続的にチャプターを書いた結果、先のチャプターの内容で後のチャプターの知識を前提としてしまっている場合も中にはありました。

とは言え、そのおかげでかなり大胆に書くことができたとも思っています。良い面・悪い面あると思いますが、たぶん分かりきっていたらこういう本は書けなかったでしょう。「解釈」の話とかはまさにそうで、かなり大胆にしている自覚があります。「勘違いを正す」ときの知見が結構重要だと個人的に思っているところもあって、「**分りつつある推移的な状態**」でボトムアップに作った部分が多く最初想定していたものから離れているのですが、自分の中ではそのおかげで面白いものが作れたなとは思っています。

## 「非同期処理」について
内容に関する真面目な話をしますと、肝心の「非同期処理」は JavaScript の初学者が確実につまずくポイントとなっています。ECMAScript の非同期機能に目が行くのは当然で、`fetch()` や `setTimeout()` などの Web API が Promise や async/await によって見逃されてしまい、非同期 API と非同期処理の話がごっちゃになるようになっています。「非同期処理」が非同期 API とコールバックなどの話でひとくくりに認識されるので、かなり厄介であるこの罠に気づけません。他の言語での経験があれば一概にそうとはいえませんが、逆に API について当たり前の事実にされていることで JavaScript を最初に触る学習者が見落としてしまう事象について認識されていないところが多いのではないかとも思えてしまいます。

更に、環境に注目する必要があることに気づくのが非常に難しいです。学習を進めれば必然的にそこに注目しなくてはいけないことが分かるのですが、時間がかかります。自分はたまたまブラウザからではなく、Node や Deno 環境でコマンドラインでのスクリプト実行から本質的な学習を始めるというやり方で、複数の環境を最初から前提にできたこともあり、環境の相違点や共通点、環境に埋め込まれたコンポーネント群について比較的早めに意識できた方ではあると思います(結構特殊かもしれません)。

かなり重要であるにも関わらず欠落している、あるいは見落とされがちな話題や認識そのものがいくつかあることに気づいた訳です。

## コマンドラインから始める JavaScript
上で言ったことは「学習の結果」として分かった話です。ちょっと話はそれますが、以下の記事が面白く、実はこの本の考え方として一部触発されている部分があります。

- [2020年でJavaScript学ぶならきっとブラウザ向けJSガン無視していきなり初手node.js（ただし暫く何も足さない）がいいんじゃないかというメモ - min.t (ミント)](https://min.togetter.com/Hqz7ufB)
- [プログラミング初心者のための JavaScript と Node.js の歴史、それを踏まえた勉強方法](https://zenn.dev/mizchi/articles/3789a101dae388d98159)

非同期処理の実行順序を理解するためにローカルテストするなら「コマンドラインからの方が無駄なものが削ぎ落とされるはずだ」という見込みと実際の体験から Deno をメイン実行環境にしました(自分は実際に Deno を使って非同期処理をテストして学習しました)。それに、Deno があることで Node を相対的に見ることができますし、その逆もできますから理解する上でも結構良い判断でした。

>ブラウザで一々 HTML ファイルを噛ませたりするよりもシェルを使ってコマンドラインから JavaScript を実行した方が「個人的に」分かりやすいっていうのも理由として実は大きかったです(この本を書き出す前に fish shell とかの記事を量産していた経緯もあるので)。

後は、Chrome などのブラウザ環境よりもランタイム環境を基礎として考えた方がレンダリングの機構が無いためイベントループについても分かりやすくなることはこの本で紹介した通りです。V8 エンジンでローカルテストするとか色々な都合も良いですし。

環境構築やらコマンドライン一般の知識が必要だったとしても(おそらく非同期処理を学習する人はその時点で０からの初学者でもないと思うので)、ランタイム環境でコマンドライン実行した方が良いなと思った次第です。

## 本を作った動機
話を戻すと、自分が非同期処理についての学習を始めた際には、上で述べたような「非同期処理の学習において重要であるが欠落している話題」について断片的な情報しか得られない場合が多く、「なぜ非同期処理をするのか、どういう仕組みで、なぜそういう実行順序になるのかについて、環境に関わらず一般的に理解する」というような１つのストーリーで詳細に解説しているものを見つけることができませんでした。上で挙げたようなトラップについて実際には自分もかなり引っかかったので、こういったトラップについて早期に気づけるようなドキュメントもあったらいいなと考えてこの本を作り始めました。

最初は１つの記事として公開していたのですが、書いている内にこれは本にできるなと思い、ロードマップの記事のフィードバックからも色々と考えてみました。

その結果、非同期処理について**学んでみたけど分からない**という人が過去の自分も含めてかなり多いと考えたので、大きな目的として「学習者にとって簡単すぎず仕様に近すぎない抽象度で１つのストーリーとして理解したい」人達のために「**なぜ分からないかが分かる**」ように書いたのがこの一冊です。そもそも理解するための前頭として必要な知識が何なのかを分かることを大事にしてます。そういう訳で、執筆対象とするモデルを「一応学習してみたけど分かっていなかった過去の自分」にして書いています。

過去の時点で自分が知りたかったことを書いているとはいえ、自分と同じように非同期処理を理解しようと悪戦苦闘している方々のお役に立てれば幸いです。

# 宣伝
せっかくなので、最後に自分が初めて翻訳に関わったツールである Obisidian について宣伝しておきます。

最近は忙しくてあまりドキュメントなどの保守ができていませんが、個人のためのナレッジベース(PKM: Personal Knowlege Base)を作るモダンなマークダウンメモツールである Obsidian を是非使ってみてください(ちなみに Electron で開発されており、モバイルも含めてクロスプラットフォームで使えます)。

https://obsidian.md

Obsidian についての紹介記事はこちらになります。

https://zenn.dev/estra/articles/ohzflow-zenn-hugo-obsidian

この本を書いたり、非同期処理についての学習をするのにも非常に役立ちました。Zenn との相性もかなり高いのでぜひとも使ってみて広げてください。控えめに言って最高です。

